<?php
// Попробуем получить коллекцию продуктов на странице категорий
$productCollection = $block->getLoadedProductCollection();

// Отладка коллекции продуктов
echo "<pre>";
print_r($productCollection->getItems());
echo "</pre>";

// Выбираем один продукт для обработки (если это возможно)
if ($productCollection) {
    foreach ($productCollection as $product) {
        // Проверяем, является ли продукт группированным
        if ($product->getTypeId() == \Magento\GroupedProduct\Model\Product\Type\Grouped::TYPE_CODE) {
            echo "<p>Found a grouped product!</p>";

            // Рассчитываем общую цену связанных продуктов
            $_associatedProducts = $product->getTypeInstance()->getAssociatedProducts($product);
            $totalPrice = 0;
            foreach ($_associatedProducts as $_item) {
                $totalPrice += $_item->getFinalPrice();
            }

            echo "<p>Total price of grouped product: " . $totalPrice . "</p>";
        }
    }
}
?>
