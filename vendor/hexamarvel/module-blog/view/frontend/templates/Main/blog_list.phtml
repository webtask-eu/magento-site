<?php
/**
 * @author Hexamarvel Team
 * @copyright Copyright (c) 2021 Hexamarvel (https://www.hexamarvel.com)
 * @package Hexamarvel_Blog
 */

 /** $block \Hexamarvel\Blog\Block\PostList */
?>
<?php
$postCollection = $block->getPostCollection();?>
<?php if ($block->getPageLayout() == 'column-left'): ?>
    <div class="blog-sidebar left-sidebar">
        <?php $recentBlogs = $block->getRecentBlogs(); ?>
        <?php if (count($recentBlogs)): ?>
            <div class="sidebar-recent">
                <h4><?= /*@noEscape*/ __('Recent Posts'); ?></h4>
                <?php foreach ($recentBlogs as $blog): ?>
                    <a href="<?= /*@noEscape*/ $block->getPostUrl($blog); ?>" title="<?= /*@noEscape*/ $blog->getTitle(); ?>">
                        <?= /*@noEscape*/ $blog->getTitle(); ?>
                    </a>
                <?php endforeach;?>
            </div>
        <?php endif;?>
        <?php $categories = $block->getCategories(); ?>
        <?php if (count($categories)): ?>
            <div class="sidebar-recent">
                <h4><?= /*@noEscape*/ __('Categories'); ?></h4>
                <?php foreach ($categories as $category): ?>
                    <a href="<?= /*@noEscape*/ $block->getCategoryUrl($category); ?>"
                        title="<?= /*@noEscape*/ $category->getCategoryTitle(); ?>">
                        <?= /*@noEscape*/ $category->getCategoryTitle(); ?>
                    </a>
                <?php endforeach;?>
            </div>
        <?php endif;?>
    </div>
<?php endif; ?>
<div class="listWrapper <?= /*noEscape*/ $block->getPageLayout(); ?>">
    <?php if (count($postCollection)): ?>
        <div class="hexablog-list">
            <?php if ($block->getPagerHtml()): ?>
                <div class="order-blog-toolbar toolbar top">
                    <?= /*@noEscape*/ $block->getPagerHtml(); ?>
                </div>
            <?php endif ?>
            <div class="post-content">
                <?php foreach ($postCollection as $post): ?>
                    <div class="post-inner">
                        <div class="post-image">
                            <?php if ($post->getThumbnailImage()): ?>
                                <img src="<?= /*@noEscape*/ $block->getThumnailImage($post->getThumbnailImage()); ?>"
                                     title="<?= /*@noEscape*/ $post->getTitle(); ?>"
                                     alt="<?= /*@noEscape*/ $post->getTitle(); ?>"
                                />
                            <?php endif;?>
                        </div>
                        <div class="post-content">
                            <a href="<?= /*@noEscape*/ $block->getPostUrl($post); ?>" title="<?= /*@noEscape*/ $post->getTitle(); ?>">
                                <h2><?= /*@noEscape*/ $post->getTitle(); ?></h2>
                            </a>
                            <?php if ($post->getShortContent()):?>
                                <div class="short-description"><?= /*@noEscape*/ $block->getContent($post->getShortContent()); ?></div>
                            <?php endif;?>
                            <?php if ($post->getContent()):?>
                                <a href="<?= /*@noEscape*/ $block->getPostUrl($post); ?>"><?= /*@noEscape*/ __('Read More'); ?></a>
                            <?php endif;?>
                        </div>
                    </div>
                <?php endforeach; ?>
            </div>
            <?php if ($block->getPagerHtml()): ?>
                <div class="order-blog-toolbar toolbar bottom"><?= /*@noEscape*/ $block->getPagerHtml(); ?></div>
            <?php endif ?>
        </div>
    <?php else: ?>
        <div class="message notice">
            <div>
                <?= /*@noEscape*/ __('No Posts Found.'); ?>
            </div>
        </div>
    <?php endif;?>
</div>
<?php if ($block->getPageLayout() == 'column-right'): ?>
    <div class="blog-sidebar right-sidebar">
        <?php $recentBlogs = $block->getRecentBlogs(); ?>
        <?php if (count($recentBlogs)): ?>
            <div class="sidebar-recent">
                <h4><?= /*@noEscape*/ __('Recent Posts'); ?></h4>
                <?php foreach ($recentBlogs as $blog): ?>
                    <a href="<?= /*@noEscape*/ $block->getPostUrl($blog); ?>" title="<?= /*@noEscape*/ $blog->getTitle(); ?>">
                        <?= /*@noEscape*/ $blog->getTitle(); ?>
                    </a>
                <?php endforeach;?>
            </div>
        <?php endif;?>
        <?php $categories = $block->getCategories(); ?>
        <?php if (count($categories)): ?>
            <div class="sidebar-recent">
                <h4><?= /*@noEscape*/ __('Categories'); ?></h4>
                <?php foreach ($categories as $category): ?>
                    <a href="<?= /*@noEscape*/ $block->getCategoryUrl($category); ?>"
                        title="<?= /*@noEscape*/ $category->getCategoryTitle(); ?>">
                        <?= /*@noEscape*/ $category->getCategoryTitle(); ?>
                    </a>
                <?php endforeach;?>
            </div>
        <?php endif;?>
    </div>
<?php endif; ?>
